<view class="container">
  <view class="card">
    <view class="title">亲属管控</view>
    <view style="margin-bottom: 20rpx; color: #666; text-align: center;">查看已绑定老人的状态</view>
    
    <view class="status-box {{remoteStatus === 'fall' ? 'fall-bg' : 'normal-bg'}}">
      <text class="status-label">当前状态</text>
      <text class="status-value">{{statusText || (remoteStatus === 'fall' ? '异常报警' : '正常')}}</text>
      <text class="time-label">更新时间: {{lastUpdateTime}}</text>
    </view>

    <button class="btn-primary" bindtap="refreshStatus">刷新状态</button>
  </view>

  <!-- AI 分析模块 -->
  <view class="card">
    <view class="title">AI 健康助手</view>
    <view class="ai-box">
      <view wx:if="{{!aiResult}}" class="ai-placeholder">
        点击下方按钮，AI 将根据设备数据分析老人健康状况
      </view>
      <view wx:else class="ai-result">
        <text style="font-weight: bold; color: #2196F3;">AI 分析报告：</text>
        <text>\n{{aiResult}}</text>
      </view>
    </view>
    <button class="btn-ai" bindtap="analyzeHealth" loading="{{analyzing}}">
      {{analyzing ? '正在分析中...' : '生成 AI 健康报告'}}
    </button>
  </view>

  <!-- 亲情设置模块 -->
  <view class="card">
    <view class="title">贴心管家</view>
    
    <!-- 吃药提醒设置 -->
    <view class="section-title">吃药提醒设置</view>
    <view class="input-group">
      <picker mode="time" value="{{remindTime}}" bindchange="bindTimeChange">
        <view class="picker">
          提醒时间: {{remindTime || '点击选择'}}
        </view>
      </picker>
      <input class="input-box" placeholder="输入提醒内容(如:吃降压药)" bindinput="bindContentInput" value="{{remindContent}}"/>
      <button class="btn-small" bindtap="addReminder">添加提醒</button>
    </view>

    <view class="reminder-list">
      <view class="reminder-item" wx:for="{{reminders}}" wx:key="_id">
        <text>{{item.time}} - {{item.content}}</text>
        <text class="delete-btn" bindtap="deleteReminder" data-id="{{item._id}}">删除</text>
      </view>
    </view>
  </view>
</view>